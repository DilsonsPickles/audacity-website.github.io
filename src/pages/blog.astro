---
import BlogListingCard from "../components/card/BlogListingCard.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import PageLayout from "../layouts/PageLayout.astro";

interface Frontmatter {
  title: string;
  slug: string;
  thumbnail: string;
  date: string;
  description: string;
}

const posts = await Astro.glob<Frontmatter>("./posts/*.md");
---

  <PageLayout title="Blog">
    <main class="mt-8">
        <div class="grid md:grid-cols-3 gap-4">
          {
            posts
              .sort(
                (a, b) =>
                  Date.parse(a.frontmatter.date) -
                  Date.parse(b.frontmatter.date)
              )
              .map((post) => (
                <BlogListingCard
                  title={post.frontmatter.title}
                  description={
                    post.frontmatter.description.slice(0, 100) + "..."
                  }
                  href={`/posts/${post.frontmatter.slug}`}
                  thumbnail={post.frontmatter.thumbnail}
                />
              ))
          }
        </div>
    </main>
  </PageLayout>
