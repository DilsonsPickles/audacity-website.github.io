---
import Layout from "../layouts/Layout.astro";
import ReleaseVideo from "../components/ReleaseVideo.astro";
import AudacityLight from "../assets/img/AudacityLight.png";
import AudacityDark from "../assets/img/AudacityDark.png";
import Card from "../components/card/Card.astro";
import PrimaryDownloadButton from "../components/button/PrimaryDownloadButton";
import VanityMetric from "../components/VanityMetric.astro";
import Badge from "../components/Badge.astro";
import RealTimeEffects from "../assets/img/features/RealTimeEffects.png";
import ShareAudio from "../assets/img/features/ShareAudio.png";
import FeaturedFeature from "../components/FeaturedFeature.astro";

interface Frontmatter {
  title: string;
  slug: string;
  thumbnail: string;
  date: string;
}

const posts = await Astro.glob<Frontmatter>("./posts/*.md");
---

<Layout title="Audacity | Home">
  <main class="mt-12">
    <!----- HERO BANNER ----->
    <section class="grid-background">
      <div
        class="px-8 pt-40 pb-40 max-w-md sm:max-w-xl md:max-w-xl lg:max-w-4xl xl:max-w-6xl mx-auto lg:flex lg:gap-8"
      >
        <div
          class="relative overflow-hidden shadow-inner bg-gray-200 rounded-md pt-6 pl-6 sm:pt-12 sm:pl-12 flex-1 lg:order-2"
        >
          <img
            src={AudacityLight}
            alt="Audacity"
            class="absolute sm:scale-125 lg:scale-150 sm:origin-top-left -right-12 sm:-right-24 -bottom-10 sm:-bottom-20 z-10 lg:-bottom-16 lg:-right-24 xl:-bottom-24 xl:-right-24"
          />
          <img
            src={AudacityDark}
            alt="Audacity"
            class="sm:scale-125 lg:scale-150 sm:origin-top-left z-0"
          />
        </div>
        <div class="lg:flex lg:flex-col lg:justify-center flex-1">
          <h1
            class="mt-6 sm:mt-8 text-2xl sm:text-4xl lg:text-4xl xl:text-5xl font-bold text-gray-900"
          >
            <span class="text-blue-500">Free</span>, open source, cross-platform
            audio software
          </h1>
          <p class="mt-2 sm:mt-4 xl:text-xl text-gray-600">
            A compelling and well rationalised value proposition statement for
            music producers that converts them.
          </p>
          <PrimaryDownloadButton client:only />
          <div class="flex flex-col md:flex-row mt-4 md:divide-x md:gap-x-4">
            <p class="text-gray-600">Latest version 3.2.3</p><a
              href="https://github.com/audacity/audacity/releases/tag/Audacity-3.2.4"
              target="_blank"
              class="text-gray-600 md:pl-4 underline">Read release notes</a
            >
          </div>
        </div>
      </div>
    </section>
    <!----------------------->

    <!--- VANITY METRICS  --->
    <section class="bg-gray-100">
      <div
        class="max-w-sm sm:max-w-xl md:max-w-xl lg:max-w-2xl xl:max-w-6xl mx-auto py-12 px-8 grid gap-y-4 sm:grid-cols-3 sm:divide-x"
      >
        <VanityMetric label="Downloads" value="240M +" />
        <VanityMetric label="Languages" value="24" />
        <VanityMetric label="Contributors" value="569" />
      </div>
    </section>
    <!----------------------->

    <!---- RELEASE VIDEO ---->
    <ReleaseVideo />
    <!----------------------->

    <!-- FEATURED FEATURES -->
    <section>
      <div class="flex flex-col max-w-sm mx-auto lg:max-w-4xl px-8 pt-24 pb-28 gap-y-24">
        <FeaturedFeature
          imgSrc={RealTimeEffects}
          featuredText="Audacity 3.2.0 is a gigantic release, adding: VST3 support, Realtime Effects support and the ability to upload and share audio with our new sister service, audio.com."
          badgeText="New in v3.2"
          title="Realtime effects"
          flipped={false}
          href="https://support.audacityteam.org/audio-editing/using-realtime-effects"
        />
        <FeaturedFeature
          imgSrc={ShareAudio}
          featuredText="Plugins allow you to add entirely new effects to your project and extend Audacityâ€™s functionality."
          badgeText="New in v3.2"
          title="Share to audio.com"
          flipped
          href="https://support.audacityteam.org/basics/sharing-audio-online"
        />
      </div>
    </section>
  </main>
  <!----------------------->

  <!-- LATEST BLOG POSTS -->
  <section class="grid-background">
    <div
      class="px-8 pt-16 pb-32 max-w-md sm:max-w-xl md:max-w-xl lg:max-w-4xl mx-auto"
    >
      <h2 class="text-gray-800 mt-6 sm:mt-8 text-lg sm:text-2xl text-gray-700 font-bold">
        Latest blog posts
      </h2>

      <div class="grid md:grid-cols-2 gap-x-8 mt-6">
        {
          posts
            .sort(
              (a, b) =>
                Date.parse(a.frontmatter.date) - Date.parse(b.frontmatter.date)
            )
            .map((post) => (
              <Card
                title={post.frontmatter.title}
                description={post.rawContent().slice(0, 100)}
                href={`/posts/${post.frontmatter.slug}`}
                thumbnail={post.frontmatter.thumbnail}
              />
            ))
        }
      </div>
    </div>
  </section>
  <!----------------------->
</Layout>

<style>
  .grid-background {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.1'%3E%3Cpath opacity='0.8' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  }
</style>
